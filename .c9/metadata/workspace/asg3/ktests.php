{"filter":false,"title":"ktests.php","tooltip":"/asg3/ktests.php","undoManager":{"mark":9,"position":9,"stack":[[{"start":{"row":0,"column":0},"end":{"row":173,"column":1},"action":"insert","lines":["function generateCart() {","\tif( !empty($_SESSION['ShoppingCart']) ) {","\t\t","\t\t$cart = $_SESSION['ShoppingCart'];","\t\t","\t\tforeach($cart as $item) {","\t\t\t","\t\t\t$itemPrice = calculatePrice($item);","\t\t\t","\t\t\tif($_SESSION['ShoppingCart'][$item['ID']]['Price'] != $itemPrice) { //checks and updates price","\t\t\t\t$_SESSION['ShoppingCart'][$item['ID']]['Price'] = $itemPrice;","\t\t\t\t$item['Price'] = $_SESSION['ShoppingCart'][$item['ID']]['Price']; //needed to update item['Price'] in current session","\t\t\t}","\t\t\t","\t\t\techo \"<tr>\";","\t\t\techo \"<td><a href='single-image.php?id=\" . $item['ID'] . \"'><img src='travel-images/square-small/\" . $item['Path'] . \"' class= 'img-thumbnail'/></a></td>\";","\t\t\techo \"<td>\" .$item['Title'] . \"</td>\";","\t\t\t","\t\t\techo \"<td><input type='text' name='quantity-\" . $item['ID'] . \"' value='\" . $item['Quantity'] . \"' maxlength='3' size='3'></td>\";","\t\t\t","\t\t\techo \"<td>\";","\t\t\techo","\t\t\t\"<select name='size-\" . $item['ID'] . \"'>","\t\t\t\t<option value='5x7' \" . (($item['Size'] == \"5x7\") ? \"selected='selected'\" : \"\") . \">5x7</option>","\t\t\t\t<option value='8x10' \" . (($item['Size'] == \"8x10\") ? \"selected='selected'\" : \"\") . \">8x10</option>","\t\t\t\t<option value='11x14' \" . (($item['Size'] == \"11x14\") ? \"selected='selected'\" : \"\") . \">11x14</option>","\t\t\t\t<option value='12x18' \" . (($item['Size'] == \"12x18\") ? \"selected='selected'\" : \"\") . \">12x18</option>","\t\t\t</select>\";","\t\t\techo \"</td>\";","\t\t\techo \"<td>\"; ","\t\t\techo ","\t\t\t\"<select name='stock-\" . $item['ID'] . \"'>","\t\t\t\t<option value='Matte' \" . (($item['Stock'] == \"Matte\") ? \"selected='selected'\" : \"\") . \">Matte</option>","\t\t\t\t<option value='Glossy' \" . (($item['Stock'] == \"Glossy\") ? \"selected='selected'\" : \"\") . \">Glossy</option>","\t\t\t\t<option value='Canvas' \" . (($item['Stock'] == \"Canvas\") ? \"selected='selected'\" : \"\") . \">Canvas</option>","\t\t\t</select>\";","\t\t\techo \"</td>\";","\t\t\t","\t\t\techo \"<td>\";","\t\t\techo ","\t\t\t\"<select name='frame-\" . $item['ID'] . \"'>","\t\t\t\t<option value='None' \" . (($item['Frame'] == \"None\") ? \"selected='selected'\" : \"\") . \">None</option>","\t\t\t\t<option value='Blond Maple' \" . (($item['Frame'] == \"Blond Maple\") ? \"selected='selected'\" : \"\") . \">Blond Maple</option>","\t\t\t\t<option value='Expresso Walnut' \" . (($item['Frame'] == \"Expresso Walnut\") ? \"selected='selected'\" : \"\") . \">Expresso Walnut</option>","\t\t\t\t<option value='Gold Accent' \" . (($item['Frame'] == \"Gold Accent\") ? \"selected='selected'\" : \"\") . \">Gold Accent</option>","\t\t\t\t<option value='Silver Metal' \" . (($item['Frame'] == \"Silver Metal\") ? \"selected='selected'\" : \"\") . \">Silver Metal</option>","\t\t\t</select>\";","\t\t\techo \"</td>\";","\t\t\techo \"<td>\" . number_format($item['Price'], 2) . \"</td>\";","\t\t\techo \"<td>\". calculateCost($item['Price'], $item['Quantity']) . \"</td>\";","\t\t\techo \"<td><a href='removeCartItem.php?id=\" . $item['ID'] . \"'>Remove</a></td>\";","\t\t\techo \"</tr>\";","\t\t}","\t}","}","function calculateCost($price, $quantity) {","\treturn number_format($price * $quantity, 2);","}","function calculatePrice($item) {","\t$price = 0;","\t","\t//size","\tif($item['Size'] == \"5x7\") {","\t\t$price = 0.50;","\t}","\telseif($item['Size'] == \"8x10\") {","\t\t$price = 2.50;","\t}","\telseif($item['Size'] == \"11x14\") {","\t\t$price = 6.00;","\t}","\telseif($item['Size'] == \"12x18\") {","\t\t$price = 7.00;","\t}","\t","\t//stock","\tif($item['Size'] == \"5x7\" || $item['Size'] == \"8x10\") {","\t\tif($item['Stock'] == \"Matte\") {","\t\t\t$price += 0;","\t\t}","\t\telseif($item['Stock'] == \"Glossy\") {","\t\t\t$price += 0.50;","\t\t}","\t\telseif($item['Stock'] == \"Canvas\") {","\t\t\t$price += 4;","\t\t}","\t}","\telseif($item['Size'] == \"11x14\" || $item['Size'] == \"12x18\") {","\t\tif($item['Stock'] == \"Matte\") {","\t\t\t$price += 0;","\t\t}","\t\telseif($item['Stock'] == \"Glossy\") {","\t\t\t$price += 1;","\t\t}","\t\telseif($item['Stock'] == \"Canvas\") {","\t\t\t$price += 8;","\t\t}","\t}","\t","\t//frame","\tif($item['Frame'] != \"None\") {","\t\tif($item['Size'] == \"5x7\") {","\t\t\t$price += 10;","\t\t}","\t\telseif($item['Size'] == \"8x10\") {","\t\t\t$price += 12;","\t\t}","\t\telseif($item['Size'] == \"11x14\") {","\t\t\t$price += 16;","\t\t}","\t\telseif($item['Size'] == \"12x18\") {","\t\t\t$price += 20;","\t\t}","\t}","\t","\treturn $price;","}","function calculateGrandTotal() {","\treturn calculateSubTotal() + calculateShipping();","}","function calculateShipping() {","\t$shipping = 0;","\t$frames = false;","\t$frameQuantity = 0;","\t","\tif( !empty($_SESSION['ShoppingCart']) ) {","\t\t$subtotal = calculateSubTotal();","\t\tif($_SESSION['ShippingMethod'] == \"Standard\" && $subtotal < 100 || $_SESSION['ShippingMethod'] == \"Express\" && $subtotal < 300) { //if subtotal value is less than the thresholds","\t\t\tif($_SESSION['ShippingMethod'] == \"Standard\") { //sets the base shipping costs","\t\t\t\t$shipping = 5;","\t\t\t}","\t\t\telse {","\t\t\t\t$shipping = 15;","\t\t\t}","\t\t","\t\t\t$cart = $_SESSION['ShoppingCart']; //calculates whether there are framed items in the cart","\t\t\tforeach($cart as $item) {","\t\t\t\tif($item['Frame'] != \"None\") {","\t\t\t\t\t$frames = true;","\t\t\t\t\t$frameQuantity += 1;","\t\t\t\t}","\t\t\t}","\t\t\t","\t\t\tif($_SESSION['ShippingMethod'] == \"Standard\" && $frames == true) { //calculates if framed items over or within shipping thresholds","\t\t\t\tif($frameQuantity <= 10) {","\t\t\t\t\t$shipping = 15;","\t\t\t\t}","\t\t\t\telse { //greater than 10","\t\t\t\t\t$shipping = 30;","\t\t\t\t}","\t\t\t}","\t\t\telseif($_SESSION['ShippingMethod'] == \"Express\" && $frames == true) {","\t\t\t\tif($frameQuantity <= 10) {","\t\t\t\t\t$shipping = 25;","\t\t\t\t}","\t\t\t\telse { //greater than 10","\t\t\t\t\t$shipping = 45;","\t\t\t\t}\t","\t\t\t}","\t\t}","\t}","\t","\treturn $shipping;","}","function calculateSubtotal() {","\t$subtotal = 0;","\tif( !empty($_SESSION['ShoppingCart']) ) {","\t\t$cart = $_SESSION['ShoppingCart'];","\t\tforeach($cart as $item) {","\t\t\t$subtotal += $item['Price'] * $item['Quantity'];","\t\t}","\t}","\treturn $subtotal;","}"],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["<"],"id":3},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["?"]}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":[" "],"id":4},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["p"]},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["h"]},{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["p"]}],[{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"remove","lines":["p"],"id":5},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"remove","lines":["h"]},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"remove","lines":["p"]},{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"remove","lines":[" "]}],[{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["p"],"id":6},{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":["h"]},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["p"]}],[{"start":{"row":174,"column":1},"end":{"row":175,"column":0},"action":"insert","lines":["",""],"id":7},{"start":{"row":175,"column":0},"end":{"row":175,"column":1},"action":"insert","lines":["<"]}],[{"start":{"row":175,"column":1},"end":{"row":175,"column":2},"action":"insert","lines":["?"],"id":8}],[{"start":{"row":175,"column":1},"end":{"row":175,"column":2},"action":"remove","lines":["?"],"id":9},{"start":{"row":175,"column":0},"end":{"row":175,"column":1},"action":"remove","lines":["<"]}],[{"start":{"row":175,"column":0},"end":{"row":175,"column":1},"action":"insert","lines":["?"],"id":10},{"start":{"row":175,"column":1},"end":{"row":175,"column":2},"action":"insert","lines":[">"]}]]},"ace":{"folds":[],"scrolltop":940,"scrollleft":0,"selection":{"start":{"row":10,"column":3},"end":{"row":10,"column":3},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":57,"state":"php-start","mode":"ace/mode/php"}},"timestamp":1523229053458,"hash":"a0e5ce28e4908664b1f546a31dc71acff11afa93"}